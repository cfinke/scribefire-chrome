<html>
	<head>
		<meta charset="ISO8859-1">
		<title>ScribeFire Test Suite</title>
		<link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />
		<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
		<script type="text/javascript" src="http://code.jquery.com/qunit/git/qunit.js"></script>
		<script type="text/javascript">
			if (typeof opera != "undefined") {
				var platform = "presto";
				var browser = "opera";
			}
			else if (typeof Components != 'undefined') {
				var platform = "gecko";
				var browser = 'firefox';
			}
			else {
				var platform = "webkit";

				if (typeof chrome != 'undefined') {
					var browser = 'chrome';
				}
				else {
					var browser = 'safari';
				}
			}
		</script>
		<script type="text/javascript" src="io.js"></script><!-- FIREFOX ONLY -->
		<script type="text/javascript" src="messages.js"></script><!-- SAFARI ONLY -->
		<script type="text/javascript" src="util.js"></script>
		<script type="text/javascript" src="xmlrpc.js"></script>
		<script type="text/javascript" src="apis.js"></script>
		<script type="text/javascript" src="scribefire.js"></script>
		<script type="text/javascript" src="zemanta.js"></script>
		<script type="text/javascript" src="lib/jquery-ui.js"></script>
		<script type="text/javascript" src="lib/jquery-resize.js"></script>
		<script type="text/javascript" src="lib/parseUri.js"></script>
		<script type="text/javascript" src="lib/facebox.js"></script>
		<script type="text/javascript" src="lib/tiny_mce/tiny_mce_src.js"></script>
		<script type="text/javascript" src="lib/persist.js"></script>
		<script type="text/javascript" src="lib/keyboard.js"></script>
		<script type="text/javascript" src="lib/wordpress.js"></script>
		<script type="text/javascript" src="migrate.js"></script>
		<script type="text/javascript" src="lib/jquery-oembed.js"></script>
		<script type="text/javascript" src="lib/upload.js"></script>
		<script type="text/javascript" src="adbull.js"></script>
		
		<script type="text/javascript">
			function run() {
				test("util.pad", function () {
					deepEqual(pad(4), "04");
					deepEqual(pad(10), "10");
					deepEqual(pad(100), "100");
					deepEqual(pad(0), "00");
					deepEqual(pad(-1), "00");
				});
				
				test("Array.unique", function () {
					var array = [1, 2, 3, 4, 5, 4, 3, 2, 1];
					array.unique();
					
					deepEqual(array, [1, 2, 3, 4, 5]);

					var array = [1];
					array.unique();
					
					deepEqual(array, [1]);
					
					var array = [1, "1", 2, "abc", 0, false];
					array.unique();
					
					deepEqual(array, [1, "1", 2, "abc", 0, false]);
				});
				
				test("util.resolveHref", function () {
					equal(resolveHref("http://google.com/", "abc/def/ghi"), "http://google.com/abc/def/ghi");
					equal(resolveHref("http://google.com/", "/abc/def/ghi"), "http://google.com/abc/def/ghi");
					equal(resolveHref("http://google.com/", "//abc/def/ghi"), "http://abc/def/ghi");
					equal(resolveHref("http://google.com/", "http://abc.com/def/ghi"), "http://abc.com/def/ghi");
					equal(resolveHref("http://google.com/xxx/yyy", "abc/def/ghi"), "http://google.com/xxx/abc/def/ghi");
					equal(resolveHref("http://google.com/xxx/yyy/", "abc/def/ghi"), "http://google.com/xxx/yyy/abc/def/ghi");
					equal(resolveHref("http://google.com/xxx/yyy", "/abc/def/ghi"), "http://google.com/abc/def/ghi");
				});
				
				test("xmlrpc.convertToXML", function () {
					equal(XMLRPC_LIB.convertToXML("def"), "<string><![CDATA[def]]></string>");
					
					// @todo Check support. equal(XMLRPC_LIB.convertToXML(true), "<boolean>1</boolean>");
					// @todo Check support. equal(XMLRPC_LIB.convertToXML(false), "<boolean>0</boolean>");
					
					var date = new Date();
					date.setTime(5000);
					
					equal(XMLRPC_LIB.convertToXML(date), "<dateTime.iso8601>19700101T00:00:05Z</dateTime.iso8601>");
					equal(XMLRPC_LIB.convertToXML(123), "<int>123</int>");
					equal(XMLRPC_LIB.convertToXML(0), "<int>0</int>");
					equal(XMLRPC_LIB.convertToXML(-4), "<int>-4</int>");
					equal(XMLRPC_LIB.convertToXML(12.4), "<double>12.4</double>");
					equal(XMLRPC_LIB.convertToXML(-12.4), "<double>-12.4</double>");
					equal(XMLRPC_LIB.convertToXML([ 1, "2", 3.5, date ]), "<array><data><value><int>1</int></value><value><string><![CDATA[2]]></string></value><value><double>3.5</double></value><value><dateTime.iso8601>19700101T00:00:05Z</dateTime.iso8601></value></data></array>");
					equal(XMLRPC_LIB.convertToXML([ 1, [ 5 ]]), "<array><data><value><int>1</int></value><value><array><data><value><int>5</int></value></data></array></value></data></array>");
					equal(XMLRPC_LIB.convertToXML({ "a" : 4, "b" : "thirty" }), "<struct><member><name><![CDATA[a]]></name><value><int>4</int></value></member><member><name><![CDATA[b]]></name><value><string><![CDATA[thirty]]></string></value></member></struct>");
				});
				
				test("xmlrpc.makeXML", function () {
					equal(XMLRPC_LIB.makeXML("abc"), '<?xml version="1.0" encoding="UTF-8" ?>' + "\n" + '<methodCall><methodName><![CDATA[abc]]></methodName></methodCall>');
					equal(XMLRPC_LIB.makeXML("abc", [ "def" ]), '<?xml version="1.0" encoding="UTF-8" ?>' + "\n" + '<methodCall><methodName><![CDATA[abc]]></methodName><params><param><value><string><![CDATA[def]]></string></value></param></params></methodCall>');
				});
			}
				
		</script>
	</head>
	<body onload="run();">
		<h1 id="qunit-header">ScribeFire Test Suite</h1>
		<h2 id="qunit-banner"></h2>
		<div id="qunit-testrunner-toolbar"></div>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
	</body>
</html>